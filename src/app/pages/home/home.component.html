<!--
  首頁
  Home Page

  顯示精選商品、最新商品、熱門分類
  Display featured products, new arrivals, popular categories
-->

<div class="home-page">
  <!-- Hero Banner -->
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">{{ 'home.hero.title' | translate }}</h1>
      <p class="hero-subtitle">{{ 'home.hero.subtitle' | translate }}</p>
      <button mat-raised-button color="primary" class="hero-cta" (click)="goToAllProducts()">
        <mat-icon>shopping_bag</mat-icon>
        {{ 'home.hero.cta' | translate }}
      </button>
    </div>
  </section>

  <!-- Categories Section -->
  <section class="categories-section">
    <div class="section-header">
      <h2 class="section-title">{{ 'home.categories.title' | translate }}</h2>
      <p class="section-subtitle">{{ 'home.categories.subtitle' | translate }}</p>
    </div>

    <div class="categories-grid">
      @for (category of categories(); track category.id) {
        <mat-card class="category-card" (click)="goToCategory(category.slug)">
          <mat-card-content>
            <div class="category-icon-wrapper">
              <mat-icon class="category-icon">{{ category.icon }}</mat-icon>
            </div>
            <h3 class="category-name">{{ category.name }}</h3>
          </mat-card-content>
        </mat-card>
      }
    </div>
  </section>

  <!-- Featured Products Section -->
  <section class="products-section featured-section">
    <div class="section-header">
      <h2 class="section-title">{{ 'home.featured.title' | translate }}</h2>
      <p class="section-subtitle">{{ 'home.featured.subtitle' | translate }}</p>
    </div>

    <div class="products-grid">
      @for (product of featuredProducts(); track product.id) {
        <mat-card class="product-card" (click)="goToProduct(product.id)">
          <!-- 商品圖片 -->
          <div class="product-image-container">
            <img [src]="product.primaryImageUrl" [alt]="product.name" class="product-image">

            <!-- 折扣標籤 -->
            @if (product.comparePrice && product.comparePrice > product.price) {
              <div class="discount-badge">
                -{{ getDiscountPercentage(product) }}%
              </div>
            }

            <!-- 精選標籤 -->
            <mat-chip class="featured-chip">
              <mat-icon>star</mat-icon>
              精選
            </mat-chip>
          </div>

          <!-- 商品資訊 -->
          <mat-card-content class="product-info">
            <!-- 分類 -->
            <div class="product-category">{{ product.categoryName }}</div>

            <!-- 商品名稱 -->
            <h3 class="product-name">{{ product.name }}</h3>

            <!-- 簡短描述 -->
            <p class="product-description">{{ product.summary }}</p>

            <!-- 評分和銷量 -->
            <div class="product-meta">
              <div class="rating">
                <mat-icon class="star-icon">star</mat-icon>
                <span class="rating-value">{{ product.ratingAverage }}</span>
                <span class="review-count">({{ product.reviewCount }})</span>
              </div>
              <div class="sold-count">已售 {{ product.totalSold }}</div>
            </div>

            <!-- 價格和購買 -->
            <div class="product-footer">
              <div class="price-container">
                @if (product.comparePrice && product.comparePrice > product.price) {
                  <span class="compare-price">{{ product.comparePrice | currencyFormat:'TWD':'symbol' }}</span>
                }
                <span class="current-price">{{ product.price | currencyFormat:'TWD':'symbol' }}</span>
              </div>

              <button mat-raised-button color="primary" class="add-to-cart-btn" (click)="addToCart(product, $event)">
                <mat-icon>shopping_cart</mat-icon>
                加入購物車
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      }
    </div>
  </section>

  <!-- New Arrivals Section -->
  <section class="products-section new-arrivals-section">
    <div class="section-header">
      <h2 class="section-title">{{ 'home.newArrivals.title' | translate }}</h2>
      <p class="section-subtitle">{{ 'home.newArrivals.subtitle' | translate }}</p>
    </div>

    <div class="products-grid">
      @for (product of newArrivals(); track product.id) {
        <mat-card class="product-card" (click)="goToProduct(product.id)">
          <!-- 商品圖片 -->
          <div class="product-image-container">
            <img [src]="product.primaryImageUrl" [alt]="product.name" class="product-image">

            <!-- 折扣標籤 -->
            @if (product.comparePrice && product.comparePrice > product.price) {
              <div class="discount-badge">
                -{{ getDiscountPercentage(product) }}%
              </div>
            }

            <!-- 新品標籤 -->
            <mat-chip class="new-chip">
              <mat-icon>new_releases</mat-icon>
              新品
            </mat-chip>
          </div>

          <!-- 商品資訊 -->
          <mat-card-content class="product-info">
            <!-- 分類 -->
            <div class="product-category">{{ product.categoryName }}</div>

            <!-- 商品名稱 -->
            <h3 class="product-name">{{ product.name }}</h3>

            <!-- 簡短描述 -->
            <p class="product-description">{{ product.summary }}</p>

            <!-- 評分和銷量 -->
            <div class="product-meta">
              <div class="rating">
                <mat-icon class="star-icon">star</mat-icon>
                <span class="rating-value">{{ product.ratingAverage }}</span>
                <span class="review-count">({{ product.reviewCount }})</span>
              </div>
              <div class="sold-count">已售 {{ product.totalSold }}</div>
            </div>

            <!-- 價格和購買 -->
            <div class="product-footer">
              <div class="price-container">
                @if (product.comparePrice && product.comparePrice > product.price) {
                  <span class="compare-price">{{ product.comparePrice | currencyFormat:'TWD':'symbol' }}</span>
                }
                <span class="current-price">{{ product.price | currencyFormat:'TWD':'symbol' }}</span>
              </div>

              <button mat-raised-button color="primary" class="add-to-cart-btn" (click)="addToCart(product, $event)">
                <mat-icon>shopping_cart</mat-icon>
                加入購物車
              </button>
            </div>
          </mat-card-content>
        </mat-card>
      }
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-content">
      <h2 class="cta-title">探索更多商品</h2>
      <p class="cta-subtitle">數千種精選商品等你發現</p>
      <button mat-raised-button color="accent" class="cta-button" (click)="goToAllProducts()">
        <mat-icon>explore</mat-icon>
        瀏覽所有商品
      </button>
    </div>
  </section>
</div>
